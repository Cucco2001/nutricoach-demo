{
  "timestamp": "2025-07-06T11:11:12.786386",
  "user_id": "user_1747679093",
  "debug_type": "conversazione_completa_con_estrazione",
  "interazioni": {
    "fonte_dati": "deepseek_direct",
    "info_utente": {
      "et√†": 30,
      "sesso": "Maschio",
      "peso": 70,
      "altezza": 170,
      "attivit√†": "Sedentario",
      "obiettivo": "Mantenimento",
      "nutrition_answers": {},
      "agent_qa": []
    },
    "lista_interazioni": [
      {
        "numero_interazione": 1,
        "domanda_utente": "continua",
        "risposta_agente": "‚úì FASE 3 - CALCOLO MACRONUTRIENTI\n\n‚ö° Cosa sto facendo?\nAdesso suddivido le calorie giornaliere (2170 kcal) tra i tre macronutrienti principali:\n- Proteine (importanti per i muscoli e il mantenimento dei tessuti)\n- Grassi (essenziali per ormoni, cervello, cellule)\n- Carboidrati (forniscono energia rapida, fondamentali per il cervello e l‚Äôattivit√† quotidiana)\n\nEcco come suddivido i macronutrienti per una persona sedentaria che deve mantenere il peso:\n\n1. Proteine:\n  - Per stile di vita sedentario, il fabbisogno consigliato √® di circa 0.66 g per kg di peso corporeo (riferimento OMS/FAO/WHO)\n  - Calcolo: 0.66 * 70 = 46 g di proteine al giorno\n  - Apporto calorico: 46 g * 4 = 184 kcal\n  - Percentuale: 184 / 2170 * 100 = circa 8%\n\n2. Grassi:\n  - I LARN (Societ√† Italiana di Nutrizione Umana) raccomandano il 20-35% delle calorie totali\n  - Scelgo il valore intermedio (30%): 2170 * 0.30 = 651 kcal, cio√® 651 / 9 = 72 g al giorno\n\n3. Carboidrati:\n  - Calorie rimanenti: 2170 - (184 + 651) = 1335 kcal\n  - Grammi di carboidrati: 1335 / 4 = 334 g al giorno\n\nüìä Riepilogo finale macronutrienti:\n- Kcal totali: 2170\n- Proteine: 46 g (184 kcal, 8%)\n- Grassi: 72 g (651 kcal, 30%)\n- Carboidrati: 334 g (1335 kcal, 62%)\n\nüìö Fonti utilizzate:\n- Calcolo proteine: OMS/FAO/WHO, Phillips et al. (2011), Thomas et al. (2016), Project Invictus\n- Calcolo grassi: LARN (SINU)\n- Calcolo carboidrati: percentuale residua raccomandata LARN, SINU\n\n‚û°Ô∏è Conclusione:\nEcco come saranno suddivise le tue calorie tra proteine, grassi e carboidrati. Questo schema garantisce il giusto equilibrio nutrizionale per il mantenimento e supporta salute ed energia.\n\nHai domande su questi calcoli?\nVuoi che proceda con la FASE 4, in cui ti mostro come distribuiremo queste calorie e nutrienti tra i tuoi 4 pasti della giornata?",
        "timestamp": 1751793054.6875844
      }
    ]
  },
  "deepseek_estrazione": {
    "raw_response_formatted": {
      "status": "disponibile",
      "json_valido": true,
      "contenuto_originale": "\n{\n    \"macros_total\": {\n        \"kcal_finali\": 2170,\n        \"proteine_g\": 46,\n        \"proteine_kcal\": 184,\n        \"proteine_percentuale\": 8,\n        \"grassi_g\": 72,\n        \"grassi_kcal\": 651,\n        \"grassi_percentuale\": 30,\n        \"carboidrati_g\": 334,\n        \"carboidrati_kcal\": 1335,\n        \"carboidrati_percentuale\": 62\n    }\n}\n",
      "contenuto_pulito": "{\n    \"macros_total\": {\n        \"kcal_finali\": 2170,\n        \"proteine_g\": 46,\n        \"proteine_kcal\": 184,\n        \"proteine_percentuale\": 8,\n        \"grassi_g\": 72,\n        \"grassi_kcal\": 651,\n        \"grassi_percentuale\": 30,\n        \"carboidrati_g\": 334,\n        \"carboidrati_kcal\": 1335,\n        \"carboidrati_percentuale\": 62\n    }\n}",
      "contenuto_formattato": "{\n  \"macros_total\": {\n    \"kcal_finali\": 2170,\n    \"proteine_g\": 46,\n    \"proteine_kcal\": 184,\n    \"proteine_percentuale\": 8,\n    \"grassi_g\": 72,\n    \"grassi_kcal\": 651,\n    \"grassi_percentuale\": 30,\n    \"carboidrati_g\": 334,\n    \"carboidrati_kcal\": 1335,\n    \"carboidrati_percentuale\": 62\n  }\n}",
      "metadati": {
        "lunghezza_originale": 341,
        "lunghezza_pulita": 339,
        "lunghezza_formattata": 295,
        "righe_originali": 16,
        "righe_formattate": 14,
        "aveva_markdown_wrapper": false,
        "tipo_contenuto": "JSON valido"
      }
    },
    "dati_estratti_parsed": {
      "macros_total": {
        "kcal_finali": 2170,
        "proteine_g": 46,
        "proteine_kcal": 184,
        "proteine_percentuale": 8,
        "grassi_g": 72,
        "grassi_kcal": 651,
        "grassi_percentuale": 30,
        "carboidrati_g": 334,
        "carboidrati_kcal": 1335,
        "carboidrati_percentuale": 62,
        "kcal_totali": 2170
      }
    },
    "chiavi_estratte": [
      "macros_total"
    ],
    "timestamp_estrazione": "2025-07-06T11:11:12.786386"
  },
  "dati_finali_merged": {
    "caloric_needs": {
      "bmr": 1672,
      "fabbisogno_base": 2173,
      "fabbisogno_finale": 2173,
      "laf_utilizzato": 1.3,
      "dispendio_sportivo": 0,
      "aggiustamento_obiettivo": 0
    },
    "macros_total": {
      "kcal_finali": 2170,
      "proteine_g": 46,
      "proteine_kcal": 184,
      "proteine_percentuale": 8,
      "grassi_g": 72,
      "grassi_kcal": 651,
      "grassi_percentuale": 30,
      "carboidrati_g": 334,
      "carboidrati_kcal": 1335,
      "carboidrati_percentuale": 62,
      "kcal_totali": 2170
    }
  },
  "metadati": {
    "versione_debug": "4.0",
    "descrizione": "File debug con interazioni da DeepSeek + raw response diretta"
  }
}